# 苍穹织网: 低空经济政务审计平台 —— 研发交接文档 (HANDOFF.md)

**文档状态**: 开发中 / 里程碑交接记录
**最后更新**: 2026-02-26
**当前阶段**: Phase 4 - 3D空间碰撞检测与违规审计算法开发开发中

---

## 一、 项目现状概述

**核心愿景**: 完全抛弃虚假的Demo演示套路，基于真实的**高频无人机物理轨迹、深圳南山区真实3D建筑轮廓、以及真实的敏感区域POI**，打造一个面向政府监管机构的**“低空航路合规审计平台”**。

**已达成里程碑 (Phase 1-3 已竣工)**:
1. **数据底座建设完毕**: 成功从 Hugging Face 抓取了 5000+ 条高精度合成轨迹，并通过 `process_trajectories.py` 成功将风洞动力学参数映射到了深圳市南山区的真实建筑坐标系上。地理基础面（OSM建筑和需求/敏感POI点）清洗全部完成。
2. **极智渲染引擎上线**: 废弃了无法胜任 10万级 数据点的 ECharts 方案，成功采用纯正血统的大数据可视化引擎 **`Deck.gl` + `React` + `Vite`**。
3. **视觉全面升级**: 优化了纯黑死板的地图质感，目前融合了深海暗蓝网格图层（Grid Matrix）、蓝宝石建筑材质、金黄色闪烁航线以及 3D 立体红色（禁飞区）/绿色（起降点）能量柱信标。

---

## 二、 核心资产字典

当前项目的所有核心工作流都在 `d:\develop\demo\` 目录下，请接手后按此结构溯源：

### 1. 核心提案与企划
*   `Low_Altitude_Economy_Proposal.md`: **项目的“灵魂”**。包含了项目立意、四大核心模块设计和针对“计算机设计大赛”的打分项拉扯与包装文档，随时备查。

### 2. Python 自动化脚本 (`scripts/`)
**注：所有的核心爬虫与数据映射工作均已稳定，非必要无需再跑。**
*   `fetch_osm_geo.py` & `fetch_osm_pois.py`: Overpass API 直连爬虫，拉取并组装了南山区房屋和红绿色 POI。
*   `fetch_uav_trajectories.py`: Hugging Face 的巨大数据集下载器。
*   `process_*.py`: 核心清洗组，洗出 `.geojson` 和 `.csv` 直接喂给前端。

### 3. 数据资产仓库 (`data/`)
严格划分为 `raw` (原始不可变区) 和 `processed` (可消费区)：
*   所有的前端应用只准许读取 `data/processed/` 里的 `buildings_3d.geojson`、`poi_demand.geojson`、`poi_sensitive.geojson` 以及 `uav_trajectories.csv`。
*   详情请见 `data/README.md` 和 `data/Data_Dictionary.md`。

---

## 三、 接手者的下一步明确任务 (Next Actions - 立即执行)

目前的系统展示的是**“企业未经审核的混乱原始航线（会穿模、会闯禁飞区）”**，接下来的终点研发任务是开发一套 **合规审计引擎** 来治理它。

### 👉 Phase 4 核心开发任务：3D 航线违规审计与碰撞引擎
请你接手后，直接在前端（或引入新的 Python 协程）开发以下算法逻辑：
1.  **3D 空间相交计算**:
    *   遍历现有的 5000 条无人机金黄色轨迹链。
    *   利用射线或包围盒相交算法，检测哪些轨迹的 `[lng, lat, alt]` **切入了** `buildings_3d` 建筑物的多边形范围**并且**低于建筑物的高度（即发生了“撞楼”）。
    *   检测哪些轨迹**侵入了** `poi_sensitive` 周边的红色圆柱禁飞安全半径。
2.  **报警高亮可视化 (Deck.gl 侧)**:
    *   将这些发生碰撞或侵入的航段从常规的“金黄色”强行渲染成**“闪烁的暴击红色”**！
3.  **违规日志输出面板 (React UI 侧)**:
    *   在左侧或右下角的 Bloomberg 风格暗黑监控台上，实时打印出被拦截的违规航班 ID（例如：`[拦截] 航班 UAV_03921 严重违规：高度 62m 穿透大族激光科技中心!`）。

祝你开发顺利，打造出计算机设计大赛的降维打击作品！
